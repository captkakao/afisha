# afisha.kz API documentation

## Подтверждение данных пользователя

- Подтверждение номера телефона
- Подтверждение E-Mail

---

### ![](images/post.svg) /phone-confirmation/send [![](images/lock.svg)](auth.md#авторизация)
`Accept: application/json`

Отправка СМС-кода для подтверждения номера. \
Для повторной отправки СМС (кнопка "Отправить повторно") использовать этот же endpoint. \
Формат номера не важен.

#### Body

| Параметр | Тип | Обязательный | Описание |
| ------ | ------ | ------ | ------ |
| phone | `string` | Да | Номер телефона |

#### Пример запроса

```json
{
  "phone": "+7 777 777 77 77"
}
```

#### Ответ

`204` - код подтверждения будет отправлен на указанный номер

`400` - типы ошибок

| error_type | Описание | 
| ------ | ------ | 
| phone_confirmed | Пользователь уже подтвердил свой телефон |

`422` - [ошибка валидации](errors.md#ошибка-валидации-данных) полученных данных


---

### ![](images/post.svg) /phone-confirmation/confirm [![](images/lock.svg)](auth.md#авторизация)
`Accept: application/json`

Подтвердить номер телефона

#### Body

| Параметр | Тип | Обязательный | Описание |
| ------ | ------ | ------ | ------ |
| phone | `string` | Да | Номер телефона |
| code | `string` | Да | Код подтверждения |

#### Пример запроса

```json
{
  "phone": "+7 777 777 77 77",
  "code": "0123"
}
```

#### Ответ

`200` - номер телефона успешно подтвержден

`400` - типы ошибок

| error_type | Описание | 
| ------ | ------ | 
| phone_confirmed | Пользователь уже подтвердил свой телефон |

`422` - [ошибка валидации](errors.md#ошибка-валидации-данных) полученных данных


---

### ![](images/post.svg) /email-confirmation/send
`Accept: application/json`

Отправка письма для подтверждения указанной почты. \
Для повторной отправки письма (кнопка "Отправить повторно") использовать этот же endpoint.

#### Body

| Параметр | Тип | Обязательный | Описание |
| ------ | ------ | ------ | ------ |
| email | `string` | Да | E-mail пользователя |

#### Пример запроса

```json
{
  "email": "user@gmail.com"
}
```

#### Ответ

`204` - письмо будет отправлено на указанный e-mail

`400` - типы ошибок

| error_type | Описание | 
| ------ | ------ | 
| email_confirmed | Пользователь с таким e-mail уже подтвердил свою почту |

`422` - [ошибка валидации](errors.md#ошибка-валидации-данных) полученных данных


---

### ![](images/post.svg) /email-confirmation/confirm
`Accept: application/json`

Подтвердить e-mail

#### Body

| Параметр | Тип | Обязательный | Описание |
| ------ | ------ | ------ | ------ |
| email | `string` | Да | E-mail пользователя |
| code | `string` | Да | Код подтверждения |

#### Пример запроса

```json
{
  "email": "user@gmail.com",
  "code": "eyJ0eXAiOiJKV1Q..."
}
```

#### Ответ

`200` - e-mail успешно подтвержден

`400` - типы ошибок

| error_type | Описание | 
| ------ | ------ | 
| email_confirmed | Пользователь с таким e-mail уже подтвердил свою почту |

`422` - [ошибка валидации](errors.md#ошибка-валидации-данных) полученных данных
